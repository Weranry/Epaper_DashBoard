# E-Paper_Dashboard

## 项目介绍

本项目为OpenEpaperLink项目的Image_Url功能开发，旨在更简便的获取常用但不需要频繁刷新的信息，由于墨水屏的特殊性质，只需要很少的电量刷新屏幕内容，而不需要额外的电量维持显示，因此我们可以借助静态图片的形式展示一些信息，例如：今天的日历，当前的天气等等。本项目使用Python开发，另有JavaScript版本（目前已弃用），可使用Vercel部署，这种api项目，在请求量和请求次数不是很频繁的状况下，还是更适合使用Vercel这样的无服务器函数，在成本及效果上更优，由于JavaScript的Canvas库需要C++编译器，所以我不得不寻找一种替代方案即PureImage库，但是该库的功能还是较少，而且JavaScript在某些方面的效率并不高，所以我转向了Python开发。

### 功能（还在更新中）

- **天气信息**：获取当前天气的 JSON 数据和图像。
- **课程表**：获取当前课程的 JSON 数据和图像。
- **知乎内容**：获取知乎每日内容的图像。
- **MMC 日历**：获取指定频道的日历图像。
- **倒数日**：还在计划的开发中，已经有了功能代码，但是UI并未设计好。
- **天文信息**：还在计划的开发中。

## 如何请求

### 1. 获取天气信息

关于天气信息的来源：我使用了api数据，但是由于其api调用的安全策略以及开发者政策，我不得不使用爬虫来获取相应数据。

- 关于城市代码内容，请详细查询和风天气的GitHub仓库。
  
- **获取天气 JSON 数据**：
  ```
  GET /weather/now/json/<location>
  ```
  示例请求：
  ```
  GET /weather/now/json/beijing-CityID
  ```

- **获取天气图像**：
  ```
  GET /weather/now/img/<location>
  ```
  示例请求：
  ```
  GET /weather/now/img/beijing-CityID
  ```

### 2. 获取课程表

获取课程表的前提是按照我提供的Json格式进行填充，此外我并没有找到比Json更简便且效率更高的数据存储方式，仅仅对于课程表这一项来说。

- **获取课程表 JSON 数据**：
  ```
  GET /schedule/json
  ```

- **获取课程表图像**：
  ```
  GET /schedule/img
  ```

### 3. 获取知乎内容图像

通过请求了基于RSSHUB的ZhiHUDaily而获取的内容，灵感来源于知乎好问日历

- **获取知乎图像**：
  ```
  GET /zhihu/img
  ```

### 4. 获取 MMC 日历图像

我不得不承认，秒秒测智能健康日历是个很不错的硬件产品，我已经使用它超过四年，另外我还是第一批参与众筹的用户，如果他们可以添加更多的日历频道就更好了，即使付费也可以，另外就是愚蠢的干电池设计，是我不得不频繁的更换7号电池，我将会在不久的将来对它的供电电路进行修改，使用可充电的锂电池进行供电。
关于日历的数据，我通过网络抓包的方式分析了其通讯协议和api，并且将其封装为了一个可以通过其日历频道获取其日历图像的api。至于具体参数请自行查询下列表格。

- **获取指定频道的日历图像**：
  ```
  GET /MMC/<channel>
  ```
  示例请求：
  ```
  GET /MMC/21
  ```
|编号|频道|名称|
|----|----|----|
|1|1|秒秒测老黄历|
|2|2|胖柠檬|
|3|3|健康日历|
|4|6|秒秒测·乌鸡汤|
|5|9|洞见创新|
|6|10|秒秒测古诗词|
|7|13|怡禾育儿日历|
|8|14|老爸评测|
|9|15|她说|
|10|16|党史知识日历|
|11|17|秒秒测英语单词日历|
|12|21|秒秒测·四大名著|
